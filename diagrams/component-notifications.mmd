%%{init: {"flowchart": {"defaultRenderer": "elk"}} }%%
graph TB
    api[Notifications API]

    subgraph backing[Backing Services]
        postgres[(PostgreSQL)]
        rabbitmq>RabbitMQ]
    end

    subgraph external[External Providers]
        email_provider[Email Provider]
        push_provider[Push Provider]
    end

    api --> postgres
    api --> rabbitmq
    api --> email_provider
    api --> push_provider

    %% Node styles
    classDef apiStyle fill:#FF9F40,stroke:#FF9F40,color:#fff
    classDef storageStyle fill:#95a5a6,stroke:#95a5a6,color:#fff
    classDef externalStyle fill:#E8E8E8,stroke:#E8E8E8,color:#333

    class api apiStyle
    class postgres,rabbitmq storageStyle
    class email_provider,push_provider externalStyle

    %% Subgraph styling
    style backing fill:#e0e3e4,stroke:#e0e3e4
    style external fill:#f5f0fa,stroke:#f5f0fa
